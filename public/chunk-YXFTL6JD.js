import{d as _,e as j,g as E,m as R,n as V,o as A}from"./chunk-C36JEYPE.js";import"./chunk-LJ5XHLMQ.js";import{Ca as I,Da as S,Ga as w,K as m,L as x,Na as v,P as l,Pa as a,Qa as n,Ra as M,Va as h,Wa as k,Ya as s,_a as b,qa as y,sa as c,xa as d}from"./chunk-RX3EO7BF.js";import{h as C}from"./chunk-FK42CRUA.js";var p=class r{constructor(e){this.http=e}baseUrl="https://deckofcardsapi.com/api/deck";deckId="";getNewDeck(){return this.http.get(`${this.baseUrl}/new/shuffle/?deck_count=1`)}drawCard(){return this.http.get(`${this.baseUrl}/${this.deckId}/draw/?count=1`)}setDeckId(e){this.deckId=e}getDeckId(){return this.deckId}static \u0275fac=function(t){return new(t||r)(l(E))};static \u0275prov=m({token:r,factory:r.\u0275fac,providedIn:"root"})};var u=class r{constructor(e){this.auth=e;this.supabase=this.auth.getClient()}supabase;saveResult(e){return C(this,null,function*(){let t=yield this.auth.getUser(),i={score:e,user_email:t?.email||"guest",created_at:new Date},{error:o}=yield this.supabase.from("game_results").insert([i]);if(o)throw o})}static \u0275fac=function(t){return new(t||r)(l(A))};static \u0275prov=m({token:r,factory:r.\u0275fac,providedIn:"root"})};function G(r,e){if(r&1&&(a(0,"div",10),M(1,"img",11),n()),r&2){let t=k();c(),v("src",t.currentCard.image,y)}}var f=class r{constructor(e,t,i){this.cardService=e;this.toastService=t;this.gameResultService=i}currentCard=null;lastCardValue=0;score=0;lives=3;ngOnInit(){this.cardService.getNewDeck().subscribe(e=>{this.cardService.setDeckId(e.deck_id),this.drawInitialCard()})}drawInitialCard(){this.cardService.drawCard().subscribe(e=>{this.currentCard=e.cards[0],this.lastCardValue=this.getCardValue(this.currentCard.value)})}getCardValue(e){return{ACE:1,JACK:11,QUEEN:12,KING:13}[e]||+e}guess(e){this.cardService.drawCard().subscribe(t=>{let i=t.cards[0],o=this.getCardValue(i.value);(e==="higher"?o>this.lastCardValue:o<this.lastCardValue)?this.score++:this.lives--,this.lastCardValue=o,this.currentCard=i,this.lives===0&&(this.toastService.showGameOver(this.score),this.gameResultService.saveResult(this.score),this.resetGame())})}resetGame(){this.score=0,this.lives=3,this.ngOnInit()}static \u0275fac=function(t){return new(t||r)(d(p),d(V),d(u))};static \u0275cmp=I({type:r,selectors:[["app-mayor-menor"]],standalone:!1,decls:16,vars:3,consts:[[1,"min-h-screen","bg-gradient-to-br","from-gray-900","via-gray-800","to-black","text-white","p-6","flex","flex-col","items-center"],[1,"text-3xl","text-blue-400","font-bold","mb-4"],[1,"text-gray-300","mb-6","text-center"],["class","mb-4",4,"ngIf"],[1,"flex","space-x-4","mb-6"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-6","py-3","rounded-xl","font-semibold","shadow-md",3,"click"],[1,"bg-red-600","hover:bg-red-700","text-white","px-6","py-3","rounded-xl","font-semibold","shadow-md",3,"click"],[1,"text-center"],[1,"text-lg","text-green-400"],[1,"text-lg","text-red-400"],[1,"mb-4"],["alt","Current card",1,"w-40","shadow-lg","rounded-xl",3,"src"]],template:function(t,i){t&1&&(a(0,"div",0)(1,"h2",1),s(2,"\u2660\uFE0F Mayor o Menor \u2663\uFE0F"),n(),a(3,"p",2),s(4,"Adivina si la siguiente carta es mayor o es menor!"),n(),w(5,G,2,1,"div",3),a(6,"div",4)(7,"button",5),h("click",function(){return i.guess("higher")}),s(8," Mayor "),n(),a(9,"button",6),h("click",function(){return i.guess("lower")}),s(10," Menor "),n()(),a(11,"div",7)(12,"p",8),s(13),n(),a(14,"p",9),s(15),n()()()),t&2&&(c(5),v("ngIf",i.currentCard),c(8),b("Puntaje: ",i.score,""),c(2),b("Vidas: ",i.lives,""))},dependencies:[_],encapsulation:2})};var D=[{path:"",component:f}];var N=class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=S({type:r});static \u0275inj=x({imports:[j,R.forChild(D)]})};export{N as MayorMenorModule};
